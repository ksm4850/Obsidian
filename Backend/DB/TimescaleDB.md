일반 DB와 차이점

## 1. **데이터 저장 방식**

- **일반 DB**: 행(row) 기반 저장 → 한 레코드의 모든 컬럼을 함께 저장
- **시계열 DB**: 컬럼(column) 기반 저장 → 같은 시간대 데이터를 연속적으로 저장

**결과**: 시간 범위 조회 시 시계열 DB가 디스크 I/O 훨씬 적음

## 2. **자동 파티셔닝 & 압축**

- **일반 DB**: 수동으로 파티션 테이블 생성, 압축 설정 필요
- **시계열 DB**: 시간 단위로 자동 파티셔닝, 오래된 데이터 자동 압축
    - 예: 1시간/1일 단위로 자동 chunk 생성
    - 7일 지난 데이터는 자동으로 10:1 압축

## 3. **시계열 특화 함수**

sql

```sql
-- 시계열 DB는 이런 기능들이 내장
time_bucket('5 minutes', timestamp)  -- 5분 단위 집계
first(value, time)                   -- 첫 값
last(value, time)                    -- 마지막 값
rate(counter)                        -- 변화율 계산
```

일반 DB로 구현 가능하지만 복잡한 쿼리 필요

## 4. **쓰기 성능**

- **일반 DB**: 인덱스 업데이트 오버헤드, MVCC 비용
- **시계열 DB**: append-only 최적화, bulk insert에 특화
    - 로그는 과거 데이터 수정 없으므로 최적화 가능

## 5. **데이터 보관 정책**

- **일반 DB**: 직접 DELETE 쿼리 작성, cron job 설정
- **시계열 DB**: retention policy 설정만으로 자동 삭제

sql

```sql
-- TimescaleDB 예시
SELECT add_retention_policy('logs', INTERVAL '30 days');
```

## 실제 차이 예시

**1억 건 로그에서 최근 1시간 데이터 조회:**

- PostgreSQL + 날짜 인덱스: 풀 테이블 스캔 또는 인덱스 스캔 → 느림
- TimescaleDB: 해당 시간 chunk만 읽음 → 10~100배 빠름

**결론**: 날짜 인덱싱만으로는 대용량 시계열 데이터의 물리적 저장/압축/관리 최적화가 안됩니다.